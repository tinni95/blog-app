(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{434:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pt}));var r=n(8),o=n.n(r),a=n(11),i=n(99),c=n.n(i),s=n(390),l=n(0),u=n.n(l),d=n(621),m=n(14),f=n.n(m),g=n(10),j=n.n(g),b=(n(436),n(435)),p=n(37),y=n.n(p);function h(){var e=y()(["\n  extend type Query {\n    User: User\n  }\n"]);return h=function(){return e},e}var E=Object(a.gql)(h()),v=n(392),O=n(2);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w;w="://giocode-blog-app.herokuapp.com/graphql";var x=new v.a({uri:"wss"+w,options:{reconnect:!0}}),P=Object(a.createHttpLink)({uri:"http"+w}),I=Object(a.split)((function(e){var t=e.query,n=Object(O.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),x,P),S=Object(b.a)((function(e,t){var n,r;return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.headers,e.next=3,f.a.awrap(c.a.getItem("TOKEN"));case 3:return r=e.sent,e.abrupt("return",{headers:C(C({},n),{},{authorization:r?"Bearer "+r:""})});case 5:case"end":return e.stop()}}),null,null,null,Promise)})),z=new a.InMemoryCache,q=new a.ApolloClient({link:S.concat(I),cache:z,typeDefs:E,resolvers:{}}),D=n(612),T=n(619),$=n(187);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=n(387),A=n(87),Q=n(618),R=n(4),M=n(7),N=n(64);function U(){var e=y()(["\n  mutation UnLike($commentId: ID, $postId: ID) {\n    unLike(commentId: $commentId, postId: $postId) {\n      id\n    }\n  }\n"]);return U=function(){return e},e}function H(){var e=y()(["\n  mutation Like($commentId: ID, $postId: ID) {\n    like(commentId: $commentId, postId: $postId) {\n      id\n    }\n  }\n"]);return H=function(){return e},e}function K(){var e=y()(["\n  mutation EditComment($content: String!, $id: ID!) {\n    editComment(content: $content, id: $id) {\n      id\n    }\n  }\n"]);return K=function(){return e},e}function G(){var e=y()(["\n  mutation CreateComment($content: String!, $postId: ID!) {\n    createComment(content: $content, postId: $postId) {\n      id\n    }\n  }\n"]);return G=function(){return e},e}function W(){var e=y()(["\n  mutation DeletePost($id: ID!) {\n    deletePost(id: $id) {\n      id\n    }\n  }\n"]);return W=function(){return e},e}function J(){var e=y()(["\n  mutation EditPost($content: String, $title: String, $id: ID!) {\n    editPost(content: $content, title: $title, id: $id) {\n      id\n    }\n  }\n"]);return J=function(){return e},e}function _(){var e=y()(["\n  mutation CreatePost($content: String!, $title: String!) {\n    createPost(content: $content, title: $title) {\n      id\n    }\n  }\n"]);return _=function(){return e},e}function V(){var e=y()(["\n  mutation Login($username: String!) {\n    login(username: $username) {\n      token\n      user {\n        id\n      }\n    }\n  }\n"]);return V=function(){return e},e}var X=Object(a.gql)(V()),Y=Object(a.gql)(_()),Z=Object(a.gql)(J()),ee=Object(a.gql)(W()),te=Object(a.gql)(G()),ne=Object(a.gql)(K()),re=Object(a.gql)(H()),oe=Object(a.gql)(U());function ae(){var e=y()(["\n  query getPost($id: ID!) {\n    getPost(id: $id) {\n      title\n      content\n      author {\n        id\n        username\n      }\n      likes {\n        author {\n          id\n        }\n        id\n      }\n      comments {\n        id\n        createdAt\n        author {\n          id\n          username\n        }\n        content\n        likes {\n          author {\n            id\n          }\n        }\n      }\n      createdAt\n    }\n    User @client {\n      id\n    }\n  }\n"]);return ae=function(){return e},e}function ie(){var e=y()(["\n  query Posts($search: String) {\n    posts(search: $search) {\n      id\n      title\n      content\n      author {\n        username\n      }\n      likes {\n        id\n      }\n      comments {\n        id\n      }\n      createdAt\n    }\n  }\n"]);return ie=function(){return e},e}function ce(){var e=y()(["\n  query CurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return ce=function(){return e},e}function se(){var e=y()(["\n  query CurrentUser {\n    User @client {\n      id\n    }\n  }\n"]);return se=function(){return e},e}var le=Object(a.gql)(se()),ue=Object(a.gql)(ce()),de=Object(a.gql)(ie()),me=Object(a.gql)(ae()),fe=n(32),ge=n.n(fe),je=n(35),be="#3A4460",pe="#767D90",ye="#B7BAC5",he="#FFE0AA",Ee="#FFFFFF",ve="#FBFBFB",Oe="#F5F5F5",ke="#B1B4BF",Ce=n(613);function we(e){return l.createElement(je.a,ge()({},e,{style:[{backgroundColor:he,alignItems:"center",justifyContent:"center",paddingLeft:10,paddingRight:10,padding:5,borderRadius:15,width:100},e.style]}),l.createElement(Ce.a,{name:"arrowright",size:50,color:"white"}))}var xe=n(51);function Pe(e){return l.createElement(xe.a,ge()({},e,{style:[{backgroundColor:be,fontFamily:"quicksand-light",fontSize:16,padding:7.5,color:"white",paddingTop:12.5,paddingBottom:12.5,borderRadius:5},e.style]}))}var Ie=M.a.create({container:{display:"flex",flex:1,backgroundColor:"red",justifyContent:"center"},body:{flex:1,backgroundColor:ve},footer:{flex:.1,backgroundColor:Ee,justifyContent:"flex-end",alignItems:"flex-end"}}),Se=function(e){var t=e.navigation,n=Object(a.useMutation)(Y,{onCompleted:function(e){t.goBack()},refetchQueries:[{query:de}],onError:function(e){console.log(e)}}),r=o()(n,2),i=r[0],c=(r[1].data,Object(l.useState)("")),s=o()(c,2),d=s[0],m=s[1],f=Object(l.useState)(""),g=o()(f,2),j=g[0],b=g[1];return u.a.createElement(N.a,{scrollEnabled:!1,contentContainerStyle:Ie.container},u.a.createElement(R.a,{style:Ie.body},u.a.createElement(Pe,{style:{backgroundColor:Oe,margin:15,color:be,fontFamily:"quicksand-bold"},placeholder:"Post Title",placeholderTextColor:ke,value:d,onChangeText:function(e){return m(e)}}),u.a.createElement(Pe,{multiline:!0,style:{backgroundColor:Oe,margin:15,minHeight:150,color:be,fontFamily:"quicksand-bold"},placeholder:"Post Body",placeholderTextColor:ke,value:j,onChangeText:function(e){return b(e)}})),u.a.createElement(R.a,{style:Ie.footer},u.a.createElement(we,{onPress:function(){d&&j?i({variables:{content:j,title:d}}):alert("all fields mandatory")},style:{top:-30,marginRight:20}})))},ze=n(18),qe=n.n(ze),De=n(75),Te=n(93),$e=n(98);function Be(){var e=y()(["\n  subscription likeAdded($postId: ID, $commentId: ID) {\n    likeAdded(postId: $postId, commentId: $commentId) {\n      id\n      author {\n        id\n      }\n      comment {\n        id\n      }\n      post {\n        id\n      }\n    }\n  }\n"]);return Be=function(){return e},e}function Fe(){var e=y()(["\n  subscription CommentAdded($postId: ID!) {\n    commentAdded(postId: $postId) {\n      id\n      createdAt\n      author {\n        id\n        username\n      }\n      content\n      likes {\n        id\n        author {\n          id\n        }\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}function Le(){var e=y()(["\n  subscription {\n    postAdded {\n      id\n      title\n      content\n      author {\n        username\n      }\n      likes {\n        id\n        author {\n          id\n        }\n      }\n      comments {\n        id\n      }\n      createdAt\n    }\n  }\n"]);return Le=function(){return e},e}var Ae=Object(a.gql)(Le()),Qe=Object(a.gql)(Fe()),Re=Object(a.gql)(Be()),Me=M.a.create({container:{position:"absolute",opacity:.5,bottom:30,right:20}}),Ne=function(e){return u.a.createElement(je.a,{style:Me.container,onPress:e.onPress},u.a.createElement(Ce.a,{name:"pluscircle",size:60,color:pe}))},Ue=n(3),He=n.n(Ue),Ke=n(41);function Ge(e){return l.createElement(Ke.a,ge()({},e,{style:[{fontFamily:"quicksand-bold",fontSize:40,color:be},e.style]}))}function We(e){return l.createElement(Ke.a,ge()({},e,{style:[{fontFamily:"quicksand-medium",fontSize:16,color:be},e.style]}))}function Je(e){return l.createElement(Ke.a,ge()({},e,{style:[{fontFamily:"quicksand-regular",fontSize:16,color:be},e.style]}))}function _e(e){var t=e.post,n=e.onPress;return l.createElement(je.a,{style:Ve.container,onPress:n},l.createElement(Ke.a,null,l.createElement(We,{style:Ve.name},t.author.username," "),l.createElement(We,{style:Ve.when},He()(t.createdAt).fromNow())),l.createElement(Ge,{style:{fontSize:25,color:be,marginTop:10}},t.title),l.createElement(Je,{style:{fontSize:20,paddingBottom:10}},t.content.substring(0,40)),l.createElement(R.a,{style:Ve.footer},l.createElement(We,null,t.likes.length," Likes"),l.createElement(We,null,t.comments.length," Comments")))}var Ve=M.a.create({container:{backgroundColor:Ee,marginTop:15,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:3},name:{color:be},when:{color:pe},footer:{flexDirection:"row",justifyContent:"space-between"}}),Xe=M.a.create({container:{flex:1,backgroundColor:ve,padding:10,paddingTop:40}}),Ye=function(e){var t=e.navigation,n=Object(a.useQuery)(de),r=n.data,i=(r=void 0===r?{}:r).posts,c=void 0===i?[]:i,s=n.loading,d=n.refetch,m=n.subscribeToMore,f=Object(l.useState)(""),g=o()(f,2),j=g[0],b=g[1],p=Object(l.useState)([]),y=o()(p,2),h=y[0],E=y[1];return Object(l.useEffect)((function(){E(c.filter((function(e){return e.content.toLowerCase().includes(j.toLowerCase())||e.title.toLowerCase().includes(j.toLowerCase())})))}),[j,c]),Object(l.useEffect)((function(){!s&&m({document:Ae,updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.postAdded;return ge()({},e,{posts:[r].concat(qe()(e.posts))})}})}),[]),s?u.a.createElement(De.a,null):u.a.createElement(R.a,{style:Xe.container},u.a.createElement(Ge,{style:{letterSpacing:5}},"Posts"),u.a.createElement(Pe,{value:j,onChangeText:function(e){return b(e)},style:{marginTop:10},placeholderTextColor:Ee,placeholder:"Cerca post"}),u.a.createElement($e.a,{data:h,refreshControl:u.a.createElement(Te.a,{refreshing:s,onRefresh:function(){return d()}}),keyExtractor:function(e){return e.id},renderItem:function(e){var n=e.item;return u.a.createElement(_e,{onPress:function(){return t.navigate("Post",{id:n.id})},post:n})}}),u.a.createElement(Ne,{onPress:function(){return t.navigate("CreatePost")}}))},Ze=n(616),et=n(614),tt=M.a.create({small:{fontSize:12}}),nt=function(e){var t=e.postId,n=e.commentId,r=e.likes,i=e.style,c=Object(a.useQuery)(le),s=c.data,l=c.loading,d=Object(a.useMutation)(re,{onCompleted:function(e){return console.log(e)},refetchQueries:[{query:me,variables:{id:t}},{query:de}]}),m=o()(d,1)[0],f=Object(a.useMutation)(oe,{onCompleted:function(e){return console.log(e)},refetchQueries:[{query:me,variables:{id:t}},{query:de}]}),g=o()(f,1)[0];return l?u.a.createElement(De.a,null):r.find((function(e){return e.author.id==s.User.id}))?u.a.createElement(je.a,{onPress:function(){return g({variables:{postId:n?null:t,commentId:n}})},style:{flexDirection:"row",alignContent:"center",alignItems:"center"}},u.a.createElement(et.a,{name:"heart",size:24,color:he}),u.a.createElement(Ge,{style:[tt.small,{color:Ee,marginLeft:3},i]},r.length," Likes")):u.a.createElement(je.a,{onPress:function(){return m({variables:{postId:n?null:t,commentId:n}})},style:{flexDirection:"row",alignContent:"center",alignItems:"center"}},u.a.createElement(et.a,{name:"heart-outlined",size:24,color:he}),u.a.createElement(Ge,{style:[tt.small,{color:Ee,marginLeft:3},i]},r.length," Likes"))},rt=Object(l.createContext)({edit:!1,setEdit:function(e){}}),ot=M.a.create({container:{backgroundColor:Ee,marginTop:5,marginBottom:5,padding:15,minHeight:10,zIndex:100},small:{fontSize:14},smallGrey:{fontSize:14,color:pe},row:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},textInput:{borderColor:be,borderWidth:1,padding:5,paddingBottom:10,paddingTop:10,borderRadius:5},editText:{marginLeft:5,color:be,fontSize:14},confirmButton:{backgroundColor:he,padding:5,width:100,borderRadius:5,justifyContent:"center"},cancelButton:{backgroundColor:ke,padding:5,width:100,borderRadius:5,justifyContent:"center",marginLeft:15},confirmText:{fontSize:12,color:be,textAlign:"center"}}),at=function(e){var t=e.comment,n=e.flatlist,r=e.id,i=e.index,c=e.subscribeToMore;Object(l.useEffect)((function(){c()}),[]);var s=Object(a.useQuery)(le).data,d=(s=void 0===s?{}:s).User,m=void 0===d?{}:d,f=Object(l.useContext)(rt),g=Object(a.useMutation)(ne,{refetchQueries:[{query:me,variables:{id:r}}]}),j=o()(g,2),b=j[0],p=j[1],y=(p.data,p.loading),h=f.edit+""==t.id+"",E=Object(l.useState)(""),v=o()(E,2),O=v[0],k=v[1],C=Object(l.useRef)(null);Object(l.useEffect)((function(){console.log("child",n.current)}),[n]),Object(l.useEffect)((function(){h&&(C.current.focus(),console.log(n.current.scrollToIndex({index:i})))}),[f.edit]);return y?u.a.createElement(De.a,null):u.a.createElement(R.a,{style:ot.container},u.a.createElement(R.a,{style:ot.row},u.a.createElement(Ke.a,null,u.a.createElement(Ge,{style:ot.small},t.author.username," "),u.a.createElement(Ge,{style:ot.smallGrey},He()(t.createdAt).fromNow())),t.author.id===m.id&&!h&&u.a.createElement(je.a,{style:{flexDirection:"row"},onPress:function(){return k(t.content),void f.setEdit(t.id)}},u.a.createElement(Ce.a,{name:"edit",size:18,color:be}),u.a.createElement(Ge,{style:ot.editText},"Edit"))),h?u.a.createElement(u.a.Fragment,null,u.a.createElement(xe.a,{style:ot.textInput,value:O,onChangeText:function(e){return k(e)},ref:C}),u.a.createElement(R.a,{style:{flexDirection:"row",marginTop:15}},u.a.createElement(je.a,{onPress:function(){b({variables:{id:t.id,content:O}}),f.setEdit(null)},style:ot.confirmButton},u.a.createElement(Ge,{style:ot.confirmText},"CONFERMA")),u.a.createElement(je.a,{onPress:function(){f.setEdit(null)},style:ot.cancelButton},u.a.createElement(Ge,{style:{color:Ee,fontSize:12,textAlign:"center"}},"ANNULLA")))):u.a.createElement(u.a.Fragment,null,u.a.createElement(Je,null,t.content),u.a.createElement(R.a,{style:{height:10}}),u.a.createElement(nt,{postId:r,commentId:t.id,likes:t.likes,style:{color:be}})))},it=n(78),ct=n(9),st=n(615),lt=n(47),ut=lt.a.get("window").width,dt=(lt.a.get("window").height,M.a.create({container:{flex:1,width:ut,backgroundColor:ye,position:"absolute",bottom:0,paddingBottom:10,zIndex:100}})),mt=function(e){var t=e.id,n=Object(l.useState)(""),r=o()(n,2),i=r[0],c=r[1],s=Object(l.useState)(0),d=o()(s,2),m=d[0],f=d[1],g=Object(a.useMutation)(te,{refetchQueries:[{query:me,variables:{id:t}},{query:de}],onCompleted:function(){c(""),it.a.dismiss(),f(0)},onError:function(e){console.log(e)}}),j=o()(g,2),b=j[0];j[1].data;Object(l.useEffect)((function(){if("ios"===ct.a.OS)return it.a.addListener("keyboardDidShow",p),it.a.addListener("keyboardDidHide",y),function(){it.a.removeListener("keyboardDidShow",p),it.a.removeListener("keyboardDidHide",y)}}),[]);var p=function(e){f(e.endCoordinates.height)},y=function(){f(0)};return u.a.createElement(R.a,{style:[dt.container,{bottom:m}]},u.a.createElement(R.a,{style:{backgroundColor:Oe,flex:1,margin:15,marginBottom:10,borderRadius:5,flexDirection:"row",justifyContent:"space-between"}},u.a.createElement(xe.a,{style:{flex:6,color:be,fontFamily:"quicksand-light",fontSize:16,padding:10,paddingTop:12.5,paddingBottom:12.5},placeholder:"Leave a comment",placeholderTextColor:be,value:i,onChangeText:function(e){return c(e)}}),u.a.createElement(je.a,{style:{flex:2,padding:15,alignContent:"center",alignItems:"center"},onPress:function(){return i.length&&b({variables:{content:i,postId:t}})}},u.a.createElement(st.a,{name:"send",size:24,color:"black"}))))};function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt=M.a.create({container:{flex:1,backgroundColor:Oe},mainContainer:{padding:10,backgroundColor:Ee},small:{fontSize:12},body:{fontSize:14,marginTop:30,marginBottom:20},indicatorBar:{backgroundColor:be,height:60,flexDirection:"row",justifyContent:"space-between"},indicator:{flex:1,justifyContent:"center",alignItems:"center",alignContent:"center",flexDirection:"row"}}),bt=function(e){var t=e.route.params.id,n=Object(l.useState)(!1),r=o()(n,2),i=r[0],c=r[1],s=Object(a.useQuery)(me,{variables:{id:t}}),d=s.data,m=(d=void 0===d?{}:d).getPost,f=void 0===m?{}:m,g=d.User,j=void 0===g?{}:g,b=s.refetch,p=s.loading,y=s.subscribeToMore,h=Object(l.useRef)(null);Object(l.useEffect)((function(){return e.navigation.addListener("focus",(function(){b(t)}))}),[e.navigation]),Object(l.useEffect)((function(){p||f.author.id==j.id&&e.navigation.setOptions({headerRight:function(){return u.a.createElement(je.a,{onPress:function(){return e.navigation.navigate("EditPost",{id:t,content:f.content,title:f.title})}},u.a.createElement(st.a,{style:{padding:5},name:"edit",size:24,color:be}))}})}),[f]),Object(l.useEffect)((function(){!p&&y({document:Qe,variables:{postId:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.commentAdded;return ge()({},e,{getPost:gt(gt({},e.getPost),{},{comments:[r].concat(qe()(e.getPost.comments))})})}}),!p&&y({document:Re,variables:{postId:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.likeAdded;return ge()({},e,{getPost:gt(gt({},e.getPost),{},{likes:[r].concat(qe()(e.getPost.likes))})})}})}),[]);return p?u.a.createElement(De.a,null):u.a.createElement(rt.Provider,{value:{edit:i,setEdit:function(e){return c(e)}}},u.a.createElement(R.a,{style:jt.container},!i&&u.a.createElement(mt,{id:t}),u.a.createElement(R.a,{style:{flex:1,paddingBottom:80}},u.a.createElement($e.a,{ref:h,showsVerticalScrollIndicator:!1,ListHeaderComponent:u.a.createElement(u.a.Fragment,null,u.a.createElement(R.a,{style:jt.mainContainer},u.a.createElement(Ge,{style:{fontSize:50}},f.title),u.a.createElement(Ge,{style:jt.small},"by ",f.author.username),u.a.createElement(Je,{style:jt.body},f.content)),u.a.createElement(R.a,{style:jt.indicatorBar},u.a.createElement(R.a,{style:jt.indicator},u.a.createElement(nt,{likes:f.likes,postId:t})),u.a.createElement(R.a,{style:jt.indicator},u.a.createElement(Ze.a,{name:"comment",size:24,color:he}),u.a.createElement(Ge,{style:[jt.small,{color:Ee}]},f.comments.length," Comments")))),contentContainerStyle:{backgroundColor:Oe,paddingBottom:i?300:100},data:f.comments,keyExtractor:function(e){return e.id},refreshControl:u.a.createElement(Te.a,{refreshing:p,onRefresh:function(){return b()}}),renderItem:function(e){var n=e.item,r=e.index;return u.a.createElement(at,{subscribeToMore:function(){y({document:Re,variables:{commentId:n.id},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.likeAdded,o=e.getPost.comments.map((function(e){return e.id==r.comment.id?gt(gt({},e),{},{likes:[r].concat(qe()(e.likes))}):e}));return ge()({},e,{getPost:gt(gt({},e.getPost),{},{comments:gt({},o)})})}})},index:r,comment:n,id:t,flatlist:h})}}))))},pt=n(617),yt=n(425),ht=M.a.create({container:{display:"flex",flex:1,backgroundColor:"red",justifyContent:"center"},body:{flex:1,backgroundColor:ve},footer:{flex:.1,backgroundColor:Ee,justifyContent:"flex-end",alignItems:"flex-end"}}),Et=function(e){var t=e.navigation,n=e.route,r=n.params.id;Object(l.useEffect)((function(){t.setOptions({headerRight:function(){return u.a.createElement(je.a,{style:{padding:5},onPress:function(){return E()}},u.a.createElement(Ce.a,{name:"delete",size:24,color:be}))}})}),[]);var i=Object(a.useMutation)(Z,{onCompleted:function(e){t.goBack()},refetchQueries:[{query:de},{query:me,variables:{id:r}}],onError:function(e){console.log(e.extraInfo)}}),c=o()(i,1)[0],s=Object(a.useMutation)(ee,{onCompleted:function(e){t.navigate("Home")},refetchQueries:[{query:de}],onError:function(e){console.log(e)}}),d=o()(s,1)[0],m=Object(l.useState)(n.params.title),f=o()(m,2),g=f[0],j=f[1],b=Object(l.useState)(n.params.content),p=o()(b,2),y=p[0],h=p[1],E=function(){yt.a.alert("WARNING","Are you sure you want to delete the post?",[{text:"OK",onPress:function(){return d({variables:{id:r}})}},{text:"No"}])};return u.a.createElement(N.a,{scrollEnabled:!1,contentContainerStyle:ht.container},u.a.createElement(R.a,{style:ht.body},u.a.createElement(Pe,{style:{backgroundColor:Oe,margin:15,color:be,fontFamily:"quicksand-bold"},placeholder:"Post Title",placeholderTextColor:ke,value:g,onChangeText:function(e){return j(e)}}),u.a.createElement(Pe,{multiline:!0,style:{backgroundColor:Oe,margin:15,minHeight:150,color:be,fontFamily:"quicksand-bold"},placeholder:"Post Body",placeholderTextColor:ke,value:y,onChangeText:function(e){return h(e)}})),u.a.createElement(R.a,{style:ht.footer},u.a.createElement(we,{onPress:function(){g&&y?g===n.params.title&&y===n.params.content?t.goBack():c({variables:{content:y,title:g,id:r}}):alert("all fields mandatory")},style:{top:-30,marginRight:20}})))},vt=Object(l.createContext)({login:function(e){},logout:function(){}});function Ot(){var e=Object(a.useApolloClient)(),t=l.useContext(vt);return Object(a.useQuery)(ue,{onCompleted:function(t){var n=t.currentUser;e.writeQuery({query:le,data:{User:n}})},onError:function(){t.logout()}}),l.createElement(L.a,{theme:A.a},l.createElement(Ct,null))}var kt=Object(Q.a)();function Ct(){return l.createElement(kt.Navigator,{initialRouteName:"Home",screenOptions:{headerShown:!1}},l.createElement(kt.Screen,{name:"Home",component:Ye,options:{headerShown:!1}}),l.createElement(kt.Screen,{name:"Post",component:bt,options:{title:"",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(pt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:be})}}}),l.createElement(kt.Screen,{name:"CreatePost",component:Se,options:{title:"New Post",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(pt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:be})}}}),l.createElement(kt.Screen,{name:"EditPost",component:Et,options:{title:"Edit Post",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(pt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:be})}}}))}var wt=M.a.create({container:{flex:1,backgroundColor:Ee},top:{flex:1,padding:20},bottom:{flex:1},white:{flex:3},semiwhite:{flex:1,backgroundColor:ve,alignItems:"flex-end"},header:{flex:2,justifyContent:"flex-end"},inputContainer:{flex:1,justifyContent:"flex-end"}}),xt=function(){var e=Object(l.useState)(""),t=o()(e,2),n=t[0],r=t[1],i=Object(l.useContext)(vt),c=Object(a.useMutation)(X,{onCompleted:function(e){i.login(e.login.token)}}),s=o()(c,2),d=s[0];s[1].data;return u.a.createElement(R.a,{style:wt.container},u.a.createElement(R.a,{style:wt.top},u.a.createElement(R.a,{style:wt.header},u.a.createElement(Ge,null,"WELCOME"),u.a.createElement(Je,null,"Insert you username to start")),u.a.createElement(R.a,{style:wt.inputContainer},u.a.createElement(Pe,{placeholderTextColor:Ee,placeholder:"Username",value:n,onChangeText:function(e){return r(e)}}))),u.a.createElement(R.a,{style:wt.bottom},u.a.createElement(R.a,{style:wt.white}),u.a.createElement(R.a,{style:wt.semiwhite},u.a.createElement(we,{onPress:function(){return d({variables:{username:n}})},style:{marginTop:-30,marginRight:20}}))))};function Pt(){var e=function(){var e=l.useState(!1),t=o()(e,2),r=t[0],a=t[1];return l.useEffect((function(){f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$.b(),e.next=4,f.a.awrap(T.b(F(F({},D.a.font),{},{"quicksand-bold":n(578),"quicksand-light":n(579),"quicksand-medium":n(580),"quicksand-regular":n(581)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,a(!0),$.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=Object(l.useState)(!1),r=o()(t,2),i=r[0],m=r[1];Object(l.useEffect)((function(){c.a.getItem("TOKEN").then((function(e){e&&m(!0)}))}),[]);return e?u.a.createElement(vt.Provider,{value:{login:function(e){c.a.setItem("TOKEN",e).then((function(){return m(!0)}))},logout:function(){c.a.removeItem("TOKEN").then((function(){return m(!1)}))}}},u.a.createElement(a.ApolloProvider,{client:q},u.a.createElement(d.b,null,i?u.a.createElement(Ot,null):u.a.createElement(xt,null),u.a.createElement(s.StatusBar,null)))):null}},446:function(e,t,n){e.exports=n(609)},578:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Bold.ttf"},579:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Light.ttf"},580:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Medium.ttf"},581:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Regular.ttf"},589:function(e,t,n){var r={"./af":234,"./af.js":234,"./ar":235,"./ar-dz":236,"./ar-dz.js":236,"./ar-kw":237,"./ar-kw.js":237,"./ar-ly":238,"./ar-ly.js":238,"./ar-ma":239,"./ar-ma.js":239,"./ar-sa":240,"./ar-sa.js":240,"./ar-tn":241,"./ar-tn.js":241,"./ar.js":235,"./az":242,"./az.js":242,"./be":243,"./be.js":243,"./bg":244,"./bg.js":244,"./bm":245,"./bm.js":245,"./bn":246,"./bn-bd":247,"./bn-bd.js":247,"./bn.js":246,"./bo":248,"./bo.js":248,"./br":249,"./br.js":249,"./bs":250,"./bs.js":250,"./ca":251,"./ca.js":251,"./cs":252,"./cs.js":252,"./cv":253,"./cv.js":253,"./cy":254,"./cy.js":254,"./da":255,"./da.js":255,"./de":256,"./de-at":257,"./de-at.js":257,"./de-ch":258,"./de-ch.js":258,"./de.js":256,"./dv":259,"./dv.js":259,"./el":260,"./el.js":260,"./en-au":261,"./en-au.js":261,"./en-ca":262,"./en-ca.js":262,"./en-gb":263,"./en-gb.js":263,"./en-ie":264,"./en-ie.js":264,"./en-il":265,"./en-il.js":265,"./en-in":266,"./en-in.js":266,"./en-nz":267,"./en-nz.js":267,"./en-sg":268,"./en-sg.js":268,"./eo":269,"./eo.js":269,"./es":270,"./es-do":271,"./es-do.js":271,"./es-mx":272,"./es-mx.js":272,"./es-us":273,"./es-us.js":273,"./es.js":270,"./et":274,"./et.js":274,"./eu":275,"./eu.js":275,"./fa":276,"./fa.js":276,"./fi":277,"./fi.js":277,"./fil":278,"./fil.js":278,"./fo":279,"./fo.js":279,"./fr":280,"./fr-ca":281,"./fr-ca.js":281,"./fr-ch":282,"./fr-ch.js":282,"./fr.js":280,"./fy":283,"./fy.js":283,"./ga":284,"./ga.js":284,"./gd":285,"./gd.js":285,"./gl":286,"./gl.js":286,"./gom-deva":287,"./gom-deva.js":287,"./gom-latn":288,"./gom-latn.js":288,"./gu":289,"./gu.js":289,"./he":290,"./he.js":290,"./hi":291,"./hi.js":291,"./hr":292,"./hr.js":292,"./hu":293,"./hu.js":293,"./hy-am":294,"./hy-am.js":294,"./id":295,"./id.js":295,"./is":296,"./is.js":296,"./it":297,"./it-ch":298,"./it-ch.js":298,"./it.js":297,"./ja":299,"./ja.js":299,"./jv":300,"./jv.js":300,"./ka":301,"./ka.js":301,"./kk":302,"./kk.js":302,"./km":303,"./km.js":303,"./kn":304,"./kn.js":304,"./ko":305,"./ko.js":305,"./ku":306,"./ku.js":306,"./ky":307,"./ky.js":307,"./lb":308,"./lb.js":308,"./lo":309,"./lo.js":309,"./lt":310,"./lt.js":310,"./lv":311,"./lv.js":311,"./me":312,"./me.js":312,"./mi":313,"./mi.js":313,"./mk":314,"./mk.js":314,"./ml":315,"./ml.js":315,"./mn":316,"./mn.js":316,"./mr":317,"./mr.js":317,"./ms":318,"./ms-my":319,"./ms-my.js":319,"./ms.js":318,"./mt":320,"./mt.js":320,"./my":321,"./my.js":321,"./nb":322,"./nb.js":322,"./ne":323,"./ne.js":323,"./nl":324,"./nl-be":325,"./nl-be.js":325,"./nl.js":324,"./nn":326,"./nn.js":326,"./oc-lnc":327,"./oc-lnc.js":327,"./pa-in":328,"./pa-in.js":328,"./pl":329,"./pl.js":329,"./pt":330,"./pt-br":331,"./pt-br.js":331,"./pt.js":330,"./ro":332,"./ro.js":332,"./ru":333,"./ru.js":333,"./sd":334,"./sd.js":334,"./se":335,"./se.js":335,"./si":336,"./si.js":336,"./sk":337,"./sk.js":337,"./sl":338,"./sl.js":338,"./sq":339,"./sq.js":339,"./sr":340,"./sr-cyrl":341,"./sr-cyrl.js":341,"./sr.js":340,"./ss":342,"./ss.js":342,"./sv":343,"./sv.js":343,"./sw":344,"./sw.js":344,"./ta":345,"./ta.js":345,"./te":346,"./te.js":346,"./tet":347,"./tet.js":347,"./tg":348,"./tg.js":348,"./th":349,"./th.js":349,"./tk":350,"./tk.js":350,"./tl-ph":351,"./tl-ph.js":351,"./tlh":352,"./tlh.js":352,"./tr":353,"./tr.js":353,"./tzl":354,"./tzl.js":354,"./tzm":355,"./tzm-latn":356,"./tzm-latn.js":356,"./tzm.js":355,"./ug-cn":357,"./ug-cn.js":357,"./uk":358,"./uk.js":358,"./ur":359,"./ur.js":359,"./uz":360,"./uz-latn":361,"./uz-latn.js":361,"./uz.js":360,"./vi":362,"./vi.js":362,"./x-pseudo":363,"./x-pseudo.js":363,"./yo":364,"./yo.js":364,"./zh-cn":365,"./zh-cn.js":365,"./zh-hk":366,"./zh-hk.js":366,"./zh-mo":367,"./zh-mo.js":367,"./zh-tw":368,"./zh-tw.js":368};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=589}},[[446,1,2]]]);
//# sourceMappingURL=app.921f132c.chunk.js.map