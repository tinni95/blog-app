(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{434:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var r=n(8),o=n.n(r),a=n(11),i=n(99),c=n.n(i),s=n(390),l=n(0),u=n.n(l),d=n(621),m=n(14),f=n.n(m),g=n(10),b=n.n(g),p=n(436),j=n(9),y=n(435),h=n(37),E=n.n(h);function v(){var e=E()(["\n  extend type Query {\n    User: User\n  }\n"]);return v=function(){return e},e}var O=Object(a.gql)(v()),k=n(392),C=n(2);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P;P=Object({NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"blog",slug:"blog",version:"1.0.0",orientation:"portrait",icon:"./assets/images/icon.png",scheme:"myapp",userInterfaceStyle:"automatic",splash:{image:"./assets/images/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},updates:{fallbackToCacheTimeout:0},assetBundlePatterns:["**/*"],web:{},sdkVersion:"39.0.0",platforms:["ios","android","web"]}}).HEROKU?"://giocode-blog-app.herokuapp.com/graphql":"web"===j.a.OS?"://localhost:4000/graphql":"://localhost:4000/graphql".replace("localhost",function(){var e=p.a.manifest.bundleUrl,t=e.indexOf("//")+2;return e.substring(t,e.indexOf(":",t))}());var I=new k.a({uri:"ws"+P,options:{reconnect:!0}}),S=Object(a.createHttpLink)({uri:"http"+P}),z=Object(a.split)((function(e){var t=e.query,n=Object(C.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),I,S),q=Object(y.a)((function(e,t){var n,r;return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.headers,e.next=3,f.a.awrap(c.a.getItem("TOKEN"));case 3:return r=e.sent,e.abrupt("return",{headers:x(x({},n),{},{authorization:r?"Bearer "+r:""})});case 5:case"end":return e.stop()}}),null,null,null,Promise)})),D=new a.InMemoryCache,T=new a.ApolloClient({link:q.concat(z),cache:D,typeDefs:O,resolvers:{}}),$=n(612),B=n(619),L=n(187);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=n(387),Q=n(87),U=n(618),N=n(4),M=n(7),H=n(64);function K(){var e=E()(["\n  mutation UnLike($commentId: ID, $postId: ID) {\n    unLike(commentId: $commentId, postId: $postId) {\n      id\n    }\n  }\n"]);return K=function(){return e},e}function _(){var e=E()(["\n  mutation Like($commentId: ID, $postId: ID) {\n    like(commentId: $commentId, postId: $postId) {\n      id\n    }\n  }\n"]);return _=function(){return e},e}function G(){var e=E()(["\n  mutation EditComment($content: String!, $id: ID!) {\n    editComment(content: $content, id: $id) {\n      id\n    }\n  }\n"]);return G=function(){return e},e}function V(){var e=E()(["\n  mutation CreateComment($content: String!, $postId: ID!) {\n    createComment(content: $content, postId: $postId) {\n      id\n    }\n  }\n"]);return V=function(){return e},e}function W(){var e=E()(["\n  mutation DeletePost($id: ID!) {\n    deletePost(id: $id) {\n      id\n    }\n  }\n"]);return W=function(){return e},e}function J(){var e=E()(["\n  mutation EditPost($content: String, $title: String, $id: ID!) {\n    editPost(content: $content, title: $title, id: $id) {\n      id\n    }\n  }\n"]);return J=function(){return e},e}function X(){var e=E()(["\n  mutation CreatePost($content: String!, $title: String!) {\n    createPost(content: $content, title: $title) {\n      id\n    }\n  }\n"]);return X=function(){return e},e}function Y(){var e=E()(["\n  mutation Login($username: String!) {\n    login(username: $username) {\n      token\n      user {\n        id\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var Z=Object(a.gql)(Y()),ee=Object(a.gql)(X()),te=Object(a.gql)(J()),ne=Object(a.gql)(W()),re=Object(a.gql)(V()),oe=Object(a.gql)(G()),ae=Object(a.gql)(_()),ie=Object(a.gql)(K());function ce(){var e=E()(["\n  query getPost($id: ID!) {\n    getPost(id: $id) {\n      title\n      content\n      author {\n        id\n        username\n      }\n      likes {\n        author {\n          id\n        }\n        id\n      }\n      comments {\n        id\n        createdAt\n        author {\n          id\n          username\n        }\n        content\n        likes {\n          author {\n            id\n          }\n        }\n      }\n      createdAt\n    }\n    User @client {\n      id\n    }\n  }\n"]);return ce=function(){return e},e}function se(){var e=E()(["\n  query Posts($search: String) {\n    posts(search: $search) {\n      id\n      title\n      content\n      author {\n        username\n      }\n      likes {\n        id\n      }\n      comments {\n        id\n      }\n      createdAt\n    }\n  }\n"]);return se=function(){return e},e}function le(){var e=E()(["\n  query CurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return le=function(){return e},e}function ue(){var e=E()(["\n  query CurrentUser {\n    User @client {\n      id\n    }\n  }\n"]);return ue=function(){return e},e}var de=Object(a.gql)(ue()),me=Object(a.gql)(le()),fe=Object(a.gql)(se()),ge=Object(a.gql)(ce()),be=n(32),pe=n.n(be),je=n(35),ye="#3A4460",he="#767D90",Ee="#B7BAC5",ve="#FFE0AA",Oe="#FFFFFF",ke="#FBFBFB",Ce="#F5F5F5",we="#B1B4BF",xe=n(613);function Pe(e){return l.createElement(je.a,pe()({},e,{style:[{backgroundColor:ve,alignItems:"center",justifyContent:"center",paddingLeft:10,paddingRight:10,padding:5,borderRadius:15,width:100},e.style]}),l.createElement(xe.a,{name:"arrowright",size:50,color:"white"}))}var Ie=n(51);function Se(e){return l.createElement(Ie.a,pe()({},e,{style:[{backgroundColor:ye,fontFamily:"quicksand-light",fontSize:16,padding:7.5,color:"white",paddingTop:12.5,paddingBottom:12.5,borderRadius:5},e.style]}))}var ze=M.a.create({container:{display:"flex",flex:1,backgroundColor:"red",justifyContent:"center"},body:{flex:1,backgroundColor:ke},footer:{flex:.1,backgroundColor:Oe,justifyContent:"flex-end",alignItems:"flex-end"}}),qe=function(e){var t=e.navigation,n=Object(a.useMutation)(ee,{onCompleted:function(e){t.goBack()},refetchQueries:[{query:fe}],onError:function(e){console.log(e)}}),r=o()(n,2),i=r[0],c=(r[1].data,Object(l.useState)("")),s=o()(c,2),d=s[0],m=s[1],f=Object(l.useState)(""),g=o()(f,2),b=g[0],p=g[1];return u.a.createElement(H.a,{scrollEnabled:!1,contentContainerStyle:ze.container},u.a.createElement(N.a,{style:ze.body},u.a.createElement(Se,{style:{backgroundColor:Ce,margin:15,color:ye,fontFamily:"quicksand-bold"},placeholder:"Post Title",placeholderTextColor:we,value:d,onChangeText:function(e){return m(e)}}),u.a.createElement(Se,{multiline:!0,style:{backgroundColor:Ce,margin:15,minHeight:150,color:ye,fontFamily:"quicksand-bold"},placeholder:"Post Body",placeholderTextColor:we,value:b,onChangeText:function(e){return p(e)}})),u.a.createElement(N.a,{style:ze.footer},u.a.createElement(Pe,{onPress:function(){d&&b?i({variables:{content:b,title:d}}):alert("all fields mandatory")},style:{top:-30,marginRight:20}})))},De=n(18),Te=n.n(De),$e=n(75),Be=n(93),Le=n(98);function Fe(){var e=E()(["\n  subscription likeAdded($postId: ID, $commentId: ID) {\n    likeAdded(postId: $postId, commentId: $commentId) {\n      id\n      author {\n        id\n      }\n      comment {\n        id\n      }\n      post {\n        id\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}function Ae(){var e=E()(["\n  subscription CommentAdded($postId: ID!) {\n    commentAdded(postId: $postId) {\n      id\n      createdAt\n      author {\n        id\n        username\n      }\n      content\n      likes {\n        id\n        author {\n          id\n        }\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}function Re(){var e=E()(["\n  subscription {\n    postAdded {\n      id\n      title\n      content\n      author {\n        username\n      }\n      likes {\n        id\n        author {\n          id\n        }\n      }\n      comments {\n        id\n      }\n      createdAt\n    }\n  }\n"]);return Re=function(){return e},e}var Qe=Object(a.gql)(Re()),Ue=Object(a.gql)(Ae()),Ne=Object(a.gql)(Fe()),Me=M.a.create({container:{position:"absolute",opacity:.5,bottom:30,right:20}}),He=function(e){return u.a.createElement(je.a,{style:Me.container,onPress:e.onPress},u.a.createElement(xe.a,{name:"pluscircle",size:60,color:he}))},Ke=n(3),_e=n.n(Ke),Ge=n(41);function Ve(e){return l.createElement(Ge.a,pe()({},e,{style:[{fontFamily:"quicksand-bold",fontSize:40,color:ye},e.style]}))}function We(e){return l.createElement(Ge.a,pe()({},e,{style:[{fontFamily:"quicksand-medium",fontSize:16,color:ye},e.style]}))}function Je(e){return l.createElement(Ge.a,pe()({},e,{style:[{fontFamily:"quicksand-regular",fontSize:16,color:ye},e.style]}))}function Xe(e){var t=e.post,n=e.onPress;return l.createElement(je.a,{style:Ye.container,onPress:n},l.createElement(Ge.a,null,l.createElement(We,{style:Ye.name},t.author.username," "),l.createElement(We,{style:Ye.when},_e()(t.createdAt).fromNow())),l.createElement(Ve,{style:{fontSize:25,color:ye,marginTop:10}},t.title),l.createElement(Je,{style:{fontSize:20,paddingBottom:10}},t.content.substring(0,40)),l.createElement(N.a,{style:Ye.footer},l.createElement(We,null,t.likes.length," Likes"),l.createElement(We,null,t.comments.length," Comments")))}var Ye=M.a.create({container:{backgroundColor:Oe,marginTop:15,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22,elevation:3},name:{color:ye},when:{color:he},footer:{flexDirection:"row",justifyContent:"space-between"}}),Ze=M.a.create({container:{flex:1,backgroundColor:ke,padding:10,paddingTop:40}}),et=function(e){var t=e.navigation,n=Object(a.useQuery)(fe),r=n.data,i=(r=void 0===r?{}:r).posts,c=void 0===i?[]:i,s=n.loading,d=n.refetch,m=n.subscribeToMore,f=Object(l.useState)(""),g=o()(f,2),b=g[0],p=g[1],j=Object(l.useState)([]),y=o()(j,2),h=y[0],E=y[1];return Object(l.useEffect)((function(){E(c.filter((function(e){return e.content.toLowerCase().includes(b.toLowerCase())||e.title.toLowerCase().includes(b.toLowerCase())})))}),[b,c]),Object(l.useEffect)((function(){!s&&m({document:Qe,updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.postAdded;return pe()({},e,{posts:[r].concat(Te()(e.posts))})}})}),[]),s?u.a.createElement($e.a,null):u.a.createElement(N.a,{style:Ze.container},u.a.createElement(Ve,{style:{letterSpacing:5}},"Posts"),u.a.createElement(Se,{value:b,onChangeText:function(e){return p(e)},style:{marginTop:10},placeholderTextColor:Oe,placeholder:"Cerca post"}),u.a.createElement(Le.a,{data:h,refreshControl:u.a.createElement(Be.a,{refreshing:s,onRefresh:function(){return d()}}),keyExtractor:function(e){return e.id},renderItem:function(e){var n=e.item;return u.a.createElement(Xe,{onPress:function(){return t.navigate("Post",{id:n.id})},post:n})}}),u.a.createElement(He,{onPress:function(){return t.navigate("CreatePost")}}))},tt=n(616),nt=n(614),rt=M.a.create({small:{fontSize:12}}),ot=function(e){var t=e.postId,n=e.commentId,r=e.likes,i=e.style,c=Object(a.useQuery)(de),s=c.data,l=c.loading,d=Object(a.useMutation)(ae,{onCompleted:function(e){return console.log(e)},refetchQueries:[{query:ge,variables:{id:t}},{query:fe}]}),m=o()(d,1)[0],f=Object(a.useMutation)(ie,{onCompleted:function(e){return console.log(e)},refetchQueries:[{query:ge,variables:{id:t}},{query:fe}]}),g=o()(f,1)[0];return l?u.a.createElement($e.a,null):r.find((function(e){return e.author.id==s.User.id}))?u.a.createElement(je.a,{onPress:function(){return g({variables:{postId:n?null:t,commentId:n}})},style:{flexDirection:"row",alignContent:"center",alignItems:"center"}},u.a.createElement(nt.a,{name:"heart",size:24,color:ve}),u.a.createElement(Ve,{style:[rt.small,{color:Oe,marginLeft:3},i]},r.length," Likes")):u.a.createElement(je.a,{onPress:function(){return m({variables:{postId:n?null:t,commentId:n}})},style:{flexDirection:"row",alignContent:"center",alignItems:"center"}},u.a.createElement(nt.a,{name:"heart-outlined",size:24,color:ve}),u.a.createElement(Ve,{style:[rt.small,{color:Oe,marginLeft:3},i]},r.length," Likes"))},at=Object(l.createContext)({edit:!1,setEdit:function(e){}}),it=M.a.create({container:{backgroundColor:Oe,marginTop:5,marginBottom:5,padding:15,minHeight:10,zIndex:100},small:{fontSize:14},smallGrey:{fontSize:14,color:he},row:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},textInput:{borderColor:ye,borderWidth:1,padding:5,paddingBottom:10,paddingTop:10,borderRadius:5},editText:{marginLeft:5,color:ye,fontSize:14},confirmButton:{backgroundColor:ve,padding:5,width:100,borderRadius:5,justifyContent:"center"},cancelButton:{backgroundColor:we,padding:5,width:100,borderRadius:5,justifyContent:"center",marginLeft:15},confirmText:{fontSize:12,color:ye,textAlign:"center"}}),ct=function(e){var t=e.comment,n=e.flatlist,r=e.id,i=e.index,c=e.subscribeToMore;Object(l.useEffect)((function(){c()}),[]);var s=Object(a.useQuery)(de).data,d=(s=void 0===s?{}:s).User,m=void 0===d?{}:d,f=Object(l.useContext)(at),g=Object(a.useMutation)(oe,{refetchQueries:[{query:ge,variables:{id:r}}]}),b=o()(g,2),p=b[0],j=b[1],y=(j.data,j.loading),h=f.edit+""==t.id+"",E=Object(l.useState)(""),v=o()(E,2),O=v[0],k=v[1],C=Object(l.useRef)(null);Object(l.useEffect)((function(){console.log("child",n.current)}),[n]),Object(l.useEffect)((function(){h&&(C.current.focus(),console.log(n.current.scrollToIndex({index:i})))}),[f.edit]);return y?u.a.createElement($e.a,null):u.a.createElement(N.a,{style:it.container},u.a.createElement(N.a,{style:it.row},u.a.createElement(Ge.a,null,u.a.createElement(Ve,{style:it.small},t.author.username," "),u.a.createElement(Ve,{style:it.smallGrey},_e()(t.createdAt).fromNow())),t.author.id===m.id&&!h&&u.a.createElement(je.a,{style:{flexDirection:"row"},onPress:function(){return k(t.content),void f.setEdit(t.id)}},u.a.createElement(xe.a,{name:"edit",size:18,color:ye}),u.a.createElement(Ve,{style:it.editText},"Edit"))),h?u.a.createElement(u.a.Fragment,null,u.a.createElement(Ie.a,{style:it.textInput,value:O,onChangeText:function(e){return k(e)},ref:C}),u.a.createElement(N.a,{style:{flexDirection:"row",marginTop:15}},u.a.createElement(je.a,{onPress:function(){p({variables:{id:t.id,content:O}}),f.setEdit(null)},style:it.confirmButton},u.a.createElement(Ve,{style:it.confirmText},"CONFERMA")),u.a.createElement(je.a,{onPress:function(){f.setEdit(null)},style:it.cancelButton},u.a.createElement(Ve,{style:{color:Oe,fontSize:12,textAlign:"center"}},"ANNULLA")))):u.a.createElement(u.a.Fragment,null,u.a.createElement(Je,null,t.content),u.a.createElement(N.a,{style:{height:10}}),u.a.createElement(ot,{postId:r,commentId:t.id,likes:t.likes,style:{color:ye}})))},st=n(78),lt=n(615),ut=n(47),dt=ut.a.get("window").width,mt=(ut.a.get("window").height,M.a.create({container:{flex:1,width:dt,backgroundColor:Ee,position:"absolute",bottom:0,paddingBottom:10,zIndex:100}})),ft=function(e){var t=e.id,n=Object(l.useState)(""),r=o()(n,2),i=r[0],c=r[1],s=Object(l.useState)(0),d=o()(s,2),m=d[0],f=d[1],g=Object(a.useMutation)(re,{refetchQueries:[{query:ge,variables:{id:t}},{query:fe}],onCompleted:function(){c(""),st.a.dismiss(),f(0)},onError:function(e){console.log(e)}}),b=o()(g,2),p=b[0];b[1].data;Object(l.useEffect)((function(){if("ios"===j.a.OS)return st.a.addListener("keyboardDidShow",y),st.a.addListener("keyboardDidHide",h),function(){st.a.removeListener("keyboardDidShow",y),st.a.removeListener("keyboardDidHide",h)}}),[]);var y=function(e){f(e.endCoordinates.height)},h=function(){f(0)};return u.a.createElement(N.a,{style:[mt.container,{bottom:m}]},u.a.createElement(N.a,{style:{backgroundColor:Ce,flex:1,margin:15,marginBottom:10,borderRadius:5,flexDirection:"row",justifyContent:"space-between"}},u.a.createElement(Ie.a,{style:{flex:6,color:ye,fontFamily:"quicksand-light",fontSize:16,padding:10,paddingTop:12.5,paddingBottom:12.5},placeholder:"Leave a comment",placeholderTextColor:ye,value:i,onChangeText:function(e){return c(e)}}),u.a.createElement(je.a,{style:{flex:2,padding:15,alignContent:"center",alignItems:"center"},onPress:function(){return i.length&&p({variables:{content:i,postId:t}})}},u.a.createElement(lt.a,{name:"send",size:24,color:"black"}))))};function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=M.a.create({container:{flex:1,backgroundColor:Ce},mainContainer:{padding:10,backgroundColor:Oe},small:{fontSize:12},body:{fontSize:14,marginTop:30,marginBottom:20},indicatorBar:{backgroundColor:ye,height:60,flexDirection:"row",justifyContent:"space-between"},indicator:{flex:1,justifyContent:"center",alignItems:"center",alignContent:"center",flexDirection:"row"}}),jt=function(e){var t=e.route.params.id,n=Object(l.useState)(!1),r=o()(n,2),i=r[0],c=r[1],s=Object(a.useQuery)(ge,{variables:{id:t}}),d=s.data,m=(d=void 0===d?{}:d).getPost,f=void 0===m?{}:m,g=d.User,b=void 0===g?{}:g,p=s.refetch,j=s.loading,y=s.subscribeToMore,h=Object(l.useRef)(null);Object(l.useEffect)((function(){return e.navigation.addListener("focus",(function(){p(t)}))}),[e.navigation]),Object(l.useEffect)((function(){j||f.author.id==b.id&&e.navigation.setOptions({headerRight:function(){return u.a.createElement(je.a,{onPress:function(){return e.navigation.navigate("EditPost",{id:t,content:f.content,title:f.title})}},u.a.createElement(lt.a,{style:{padding:5},name:"edit",size:24,color:ye}))}})}),[f]),Object(l.useEffect)((function(){!j&&y({document:Ue,variables:{postId:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.commentAdded;return pe()({},e,{getPost:bt(bt({},e.getPost),{},{comments:[r].concat(Te()(e.getPost.comments))})})}}),!j&&y({document:Ne,variables:{postId:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.likeAdded;return pe()({},e,{getPost:bt(bt({},e.getPost),{},{likes:[r].concat(Te()(e.getPost.likes))})})}})}),[]);return j?u.a.createElement($e.a,null):u.a.createElement(at.Provider,{value:{edit:i,setEdit:function(e){return c(e)}}},u.a.createElement(N.a,{style:pt.container},!i&&u.a.createElement(ft,{id:t}),u.a.createElement(N.a,{style:{flex:1,paddingBottom:80}},u.a.createElement(Le.a,{ref:h,showsVerticalScrollIndicator:!1,ListHeaderComponent:u.a.createElement(u.a.Fragment,null,u.a.createElement(N.a,{style:pt.mainContainer},u.a.createElement(Ve,{style:{fontSize:50}},f.title),u.a.createElement(Ve,{style:pt.small},"by ",f.author.username),u.a.createElement(Je,{style:pt.body},f.content)),u.a.createElement(N.a,{style:pt.indicatorBar},u.a.createElement(N.a,{style:pt.indicator},u.a.createElement(ot,{likes:f.likes,postId:t})),u.a.createElement(N.a,{style:pt.indicator},u.a.createElement(tt.a,{name:"comment",size:24,color:ve}),u.a.createElement(Ve,{style:[pt.small,{color:Oe}]},f.comments.length," Comments")))),contentContainerStyle:{backgroundColor:Ce,paddingBottom:i?300:100},data:f.comments,keyExtractor:function(e){return e.id},refreshControl:u.a.createElement(Be.a,{refreshing:j,onRefresh:function(){return p()}}),renderItem:function(e){var n=e.item,r=e.index;return u.a.createElement(ct,{subscribeToMore:function(){y({document:Ne,variables:{commentId:n.id},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.likeAdded,o=e.getPost.comments.map((function(e){return e.id==r.comment.id?bt(bt({},e),{},{likes:[r].concat(Te()(e.likes))}):e}));return pe()({},e,{getPost:bt(bt({},e.getPost),{},{comments:bt({},o)})})}})},index:r,comment:n,id:t,flatlist:h})}}))))},yt=n(617),ht=n(425),Et=M.a.create({container:{display:"flex",flex:1,backgroundColor:"red",justifyContent:"center"},body:{flex:1,backgroundColor:ke},footer:{flex:.1,backgroundColor:Oe,justifyContent:"flex-end",alignItems:"flex-end"}}),vt=function(e){var t=e.navigation,n=e.route,r=n.params.id;Object(l.useEffect)((function(){t.setOptions({headerRight:function(){return u.a.createElement(je.a,{style:{padding:5},onPress:function(){return E()}},u.a.createElement(xe.a,{name:"delete",size:24,color:ye}))}})}),[]);var i=Object(a.useMutation)(te,{onCompleted:function(e){t.goBack()},refetchQueries:[{query:fe},{query:ge,variables:{id:r}}],onError:function(e){console.log(e.extraInfo)}}),c=o()(i,1)[0],s=Object(a.useMutation)(ne,{onCompleted:function(e){t.navigate("Home")},refetchQueries:[{query:fe}],onError:function(e){console.log(e)}}),d=o()(s,1)[0],m=Object(l.useState)(n.params.title),f=o()(m,2),g=f[0],b=f[1],p=Object(l.useState)(n.params.content),j=o()(p,2),y=j[0],h=j[1],E=function(){ht.a.alert("WARNING","Are you sure you want to delete the post?",[{text:"OK",onPress:function(){return d({variables:{id:r}})}},{text:"No"}])};return u.a.createElement(H.a,{scrollEnabled:!1,contentContainerStyle:Et.container},u.a.createElement(N.a,{style:Et.body},u.a.createElement(Se,{style:{backgroundColor:Ce,margin:15,color:ye,fontFamily:"quicksand-bold"},placeholder:"Post Title",placeholderTextColor:we,value:g,onChangeText:function(e){return b(e)}}),u.a.createElement(Se,{multiline:!0,style:{backgroundColor:Ce,margin:15,minHeight:150,color:ye,fontFamily:"quicksand-bold"},placeholder:"Post Body",placeholderTextColor:we,value:y,onChangeText:function(e){return h(e)}})),u.a.createElement(N.a,{style:Et.footer},u.a.createElement(Pe,{onPress:function(){g&&y?g===n.params.title&&y===n.params.content?t.goBack():c({variables:{content:y,title:g,id:r}}):alert("all fields mandatory")},style:{top:-30,marginRight:20}})))},Ot=Object(l.createContext)({login:function(e){},logout:function(){}});function kt(){var e=Object(a.useApolloClient)(),t=l.useContext(Ot);return Object(a.useQuery)(me,{onCompleted:function(t){var n=t.currentUser;e.writeQuery({query:de,data:{User:n}})},onError:function(){t.logout()}}),l.createElement(R.a,{theme:Q.a},l.createElement(wt,null))}var Ct=Object(U.a)();function wt(){return l.createElement(Ct.Navigator,{initialRouteName:"Home",screenOptions:{headerShown:!1}},l.createElement(Ct.Screen,{name:"Home",component:et,options:{headerShown:!1}}),l.createElement(Ct.Screen,{name:"Post",component:jt,options:{title:"",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(yt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:ye})}}}),l.createElement(Ct.Screen,{name:"CreatePost",component:qe,options:{title:"New Post",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(yt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:ye})}}}),l.createElement(Ct.Screen,{name:"EditPost",component:vt,options:{title:"Edit Post",headerTitleStyle:{fontFamily:"quicksand-bold"},headerShown:!0,headerLeft:function(e){return l.createElement(yt.a,{name:"keyboard-arrow-left",size:30,onPress:e.onPress,color:ye})}}}))}var xt=M.a.create({container:{flex:1,backgroundColor:Oe},top:{flex:1,padding:20},bottom:{flex:1},white:{flex:3},semiwhite:{flex:1,backgroundColor:ke,alignItems:"flex-end"},header:{flex:2,justifyContent:"flex-end"},inputContainer:{flex:1,justifyContent:"flex-end"}}),Pt=function(){var e=Object(l.useState)(""),t=o()(e,2),n=t[0],r=t[1],i=Object(l.useContext)(Ot),c=Object(a.useMutation)(Z,{onCompleted:function(e){i.login(e.login.token)}}),s=o()(c,2),d=s[0];s[1].data;return u.a.createElement(N.a,{style:xt.container},u.a.createElement(N.a,{style:xt.top},u.a.createElement(N.a,{style:xt.header},u.a.createElement(Ve,null,"WELCOME"),u.a.createElement(Je,null,"Insert you username to start")),u.a.createElement(N.a,{style:xt.inputContainer},u.a.createElement(Se,{placeholderTextColor:Oe,placeholder:"Username",value:n,onChangeText:function(e){return r(e)}}))),u.a.createElement(N.a,{style:xt.bottom},u.a.createElement(N.a,{style:xt.white}),u.a.createElement(N.a,{style:xt.semiwhite},u.a.createElement(Pe,{onPress:function(){return d({variables:{username:n}})},style:{marginTop:-30,marginRight:20}}))))};function It(){var e=function(){var e=l.useState(!1),t=o()(e,2),r=t[0],a=t[1];return l.useEffect((function(){f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L.b(),e.next=4,f.a.awrap(B.b(A(A({},$.a.font),{},{"quicksand-bold":n(578),"quicksand-light":n(579),"quicksand-medium":n(580),"quicksand-regular":n(581)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,a(!0),L.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=Object(l.useState)(!1),r=o()(t,2),i=r[0],m=r[1];Object(l.useEffect)((function(){c.a.getItem("TOKEN").then((function(e){e&&m(!0)}))}),[]);return e?u.a.createElement(Ot.Provider,{value:{login:function(e){c.a.setItem("TOKEN",e).then((function(){return m(!0)}))},logout:function(){c.a.removeItem("TOKEN").then((function(){return m(!1)}))}}},u.a.createElement(a.ApolloProvider,{client:T},u.a.createElement(d.b,null,i?u.a.createElement(kt,null):u.a.createElement(Pt,null),u.a.createElement(s.StatusBar,null)))):null}},446:function(e,t,n){e.exports=n(609)},578:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Bold.ttf"},579:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Light.ttf"},580:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Medium.ttf"},581:function(e,t,n){e.exports=n.p+"./fonts/Quicksand-Regular.ttf"},589:function(e,t,n){var r={"./af":234,"./af.js":234,"./ar":235,"./ar-dz":236,"./ar-dz.js":236,"./ar-kw":237,"./ar-kw.js":237,"./ar-ly":238,"./ar-ly.js":238,"./ar-ma":239,"./ar-ma.js":239,"./ar-sa":240,"./ar-sa.js":240,"./ar-tn":241,"./ar-tn.js":241,"./ar.js":235,"./az":242,"./az.js":242,"./be":243,"./be.js":243,"./bg":244,"./bg.js":244,"./bm":245,"./bm.js":245,"./bn":246,"./bn-bd":247,"./bn-bd.js":247,"./bn.js":246,"./bo":248,"./bo.js":248,"./br":249,"./br.js":249,"./bs":250,"./bs.js":250,"./ca":251,"./ca.js":251,"./cs":252,"./cs.js":252,"./cv":253,"./cv.js":253,"./cy":254,"./cy.js":254,"./da":255,"./da.js":255,"./de":256,"./de-at":257,"./de-at.js":257,"./de-ch":258,"./de-ch.js":258,"./de.js":256,"./dv":259,"./dv.js":259,"./el":260,"./el.js":260,"./en-au":261,"./en-au.js":261,"./en-ca":262,"./en-ca.js":262,"./en-gb":263,"./en-gb.js":263,"./en-ie":264,"./en-ie.js":264,"./en-il":265,"./en-il.js":265,"./en-in":266,"./en-in.js":266,"./en-nz":267,"./en-nz.js":267,"./en-sg":268,"./en-sg.js":268,"./eo":269,"./eo.js":269,"./es":270,"./es-do":271,"./es-do.js":271,"./es-mx":272,"./es-mx.js":272,"./es-us":273,"./es-us.js":273,"./es.js":270,"./et":274,"./et.js":274,"./eu":275,"./eu.js":275,"./fa":276,"./fa.js":276,"./fi":277,"./fi.js":277,"./fil":278,"./fil.js":278,"./fo":279,"./fo.js":279,"./fr":280,"./fr-ca":281,"./fr-ca.js":281,"./fr-ch":282,"./fr-ch.js":282,"./fr.js":280,"./fy":283,"./fy.js":283,"./ga":284,"./ga.js":284,"./gd":285,"./gd.js":285,"./gl":286,"./gl.js":286,"./gom-deva":287,"./gom-deva.js":287,"./gom-latn":288,"./gom-latn.js":288,"./gu":289,"./gu.js":289,"./he":290,"./he.js":290,"./hi":291,"./hi.js":291,"./hr":292,"./hr.js":292,"./hu":293,"./hu.js":293,"./hy-am":294,"./hy-am.js":294,"./id":295,"./id.js":295,"./is":296,"./is.js":296,"./it":297,"./it-ch":298,"./it-ch.js":298,"./it.js":297,"./ja":299,"./ja.js":299,"./jv":300,"./jv.js":300,"./ka":301,"./ka.js":301,"./kk":302,"./kk.js":302,"./km":303,"./km.js":303,"./kn":304,"./kn.js":304,"./ko":305,"./ko.js":305,"./ku":306,"./ku.js":306,"./ky":307,"./ky.js":307,"./lb":308,"./lb.js":308,"./lo":309,"./lo.js":309,"./lt":310,"./lt.js":310,"./lv":311,"./lv.js":311,"./me":312,"./me.js":312,"./mi":313,"./mi.js":313,"./mk":314,"./mk.js":314,"./ml":315,"./ml.js":315,"./mn":316,"./mn.js":316,"./mr":317,"./mr.js":317,"./ms":318,"./ms-my":319,"./ms-my.js":319,"./ms.js":318,"./mt":320,"./mt.js":320,"./my":321,"./my.js":321,"./nb":322,"./nb.js":322,"./ne":323,"./ne.js":323,"./nl":324,"./nl-be":325,"./nl-be.js":325,"./nl.js":324,"./nn":326,"./nn.js":326,"./oc-lnc":327,"./oc-lnc.js":327,"./pa-in":328,"./pa-in.js":328,"./pl":329,"./pl.js":329,"./pt":330,"./pt-br":331,"./pt-br.js":331,"./pt.js":330,"./ro":332,"./ro.js":332,"./ru":333,"./ru.js":333,"./sd":334,"./sd.js":334,"./se":335,"./se.js":335,"./si":336,"./si.js":336,"./sk":337,"./sk.js":337,"./sl":338,"./sl.js":338,"./sq":339,"./sq.js":339,"./sr":340,"./sr-cyrl":341,"./sr-cyrl.js":341,"./sr.js":340,"./ss":342,"./ss.js":342,"./sv":343,"./sv.js":343,"./sw":344,"./sw.js":344,"./ta":345,"./ta.js":345,"./te":346,"./te.js":346,"./tet":347,"./tet.js":347,"./tg":348,"./tg.js":348,"./th":349,"./th.js":349,"./tk":350,"./tk.js":350,"./tl-ph":351,"./tl-ph.js":351,"./tlh":352,"./tlh.js":352,"./tr":353,"./tr.js":353,"./tzl":354,"./tzl.js":354,"./tzm":355,"./tzm-latn":356,"./tzm-latn.js":356,"./tzm.js":355,"./ug-cn":357,"./ug-cn.js":357,"./uk":358,"./uk.js":358,"./ur":359,"./ur.js":359,"./uz":360,"./uz-latn":361,"./uz-latn.js":361,"./uz.js":360,"./vi":362,"./vi.js":362,"./x-pseudo":363,"./x-pseudo.js":363,"./yo":364,"./yo.js":364,"./zh-cn":365,"./zh-cn.js":365,"./zh-hk":366,"./zh-hk.js":366,"./zh-mo":367,"./zh-mo.js":367,"./zh-tw":368,"./zh-tw.js":368};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=589}},[[446,1,2]]]);
//# sourceMappingURL=app.0ef6b211.chunk.js.map